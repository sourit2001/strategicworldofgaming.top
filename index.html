<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colorful Game World - Free HTML5 Game Platform</title>
    <meta name="description" content="Enjoy free online HTML5 games including action games, puzzle games, sports games and more. Play instantly with no download required.">
    <meta name="keywords" content="free games, online games, HTML5 games, action games, puzzle games, sports games, free online games">
    <style>
        /* 重置样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
        }
        
        body {
            /* 移除原来的纯色背景 */
            background: linear-gradient(135deg, #ffefba, #a1c4fd, #c2e9fb, #ffdde1);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            color: #1d1d1f;
            line-height: 1.6;
        }
        
        /* 添加渐变动画 */
        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        /* 头部样式 */
        header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
            padding: 15px 0;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: 2px 0;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #7a86cb);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .slogan {
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            line-height: 1.4;
            margin: 5px 0 8px;
            padding: 5px 15px;
            border-radius: 10px;
            display: inline-block;
            background: rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            color: #0066cc;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
            animation: colorshift 8s infinite alternate;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        @keyframes colorshift {
            0% {
                background: linear-gradient(90deg, rgba(255,107,107,0.2), rgba(78,205,196,0.2), rgba(122,134,203,0.2));
                border-color: rgba(255,107,107,0.3);
            }
            50% {
                background: linear-gradient(90deg, rgba(78,205,196,0.2), rgba(122,134,203,0.2), rgba(255,107,107,0.2));
                border-color: rgba(78,205,196,0.3);
            }
            100% {
                background: linear-gradient(90deg, rgba(122,134,203,0.2), rgba(255,107,107,0.2), rgba(78,205,196,0.2));
                border-color: rgba(122,134,203,0.3);
            }
        }
        
        .search-box {
            display: flex;
            gap: 8px;
        }
        
        .search-box input {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            background: #e8e8ed;
            width: 250px;
            outline: none;
            font-size: 0.9rem;
            transition: all 0.3s;
        }
        
        .search-box input:focus {
            background: #fff;
            box-shadow: 0 0 0 2px rgba(0, 125, 250, 0.2);
        }
        
        .search-box button {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            background: #007aff;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .search-box button:hover {
            background: #0062cc;
        }
        
        /* 主容器样式 */
        .main-container {
            display: flex;
            margin: 20px auto;
            width: 90%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.85); /* 略微透明的白色 */
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px); /* 背景模糊效果 */
        }
        
        /* 侧边栏样式 */
        .sidebar {
            width: 250px;
            background: rgba(255, 255, 255, 0.7);
            padding: 20px 0;
            border-right: 1px solid rgba(232, 232, 237, 0.5);
        }
        
        .side-nav h3 {
            padding: 10px 20px;
            font-size: 1rem;
            color: #6e6e73;
            margin-bottom: 5px;
        }
        
        .side-nav ul {
            list-style: none;
            margin-bottom: 25px;
        }
        
        .side-nav ul li {
            padding: 0;
        }
        
        .category-link {
            display: block;
            padding: 10px 25px;
            text-decoration: none;
            color: #1d1d1f;
            font-weight: 500;
            border-left: 3px solid transparent;
            transition: all 0.2s;
        }
        
        .category-link:hover {
            background: #f5f5f7;
        }
        
        .category-link.active {
            border-left-color: #007aff;
            background: #f0f0f5;
            color: #007aff;
        }
        
        /* 内容区域样式 */
        .content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: calc(100vh - 100px);
        }
        
        .game-section {
            display: none;
        }
        
        .game-section.active {
            display: block;
        }
        
        .section-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e8e8ed;
        }
        
        .section-header h2 {
            font-size: 1.5rem;
            color: #1d1d1f;
        }
        
        .game-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .game-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(240,240,255,0.9));
            border: 1px solid rgba(255,255,255,0.3);
            backdrop-filter: blur(5px);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.07);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }
        
        .game-thumbnail {
            position: relative;
            width: 100%;
            height: 180px;
            overflow: hidden;
        }
        
        .game-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .game-card:hover .game-thumbnail img {
            transform: scale(1.05);
        }
        
        .game-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .game-card:hover .game-overlay {
            opacity: 1;
        }
        
        .play-btn {
            background: linear-gradient(90deg, #ff6b6b, #ff8e53);
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(255,107,107,0.3);
        }
        
        .play-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(255,107,107,0.4);
            background: linear-gradient(90deg, #ff5252, #ff7043);
        }
        
        .game-info {
            background: linear-gradient(135deg, rgba(255,255,255,0.5), rgba(240,248,255,0.7));
            padding: 15px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        
        .game-info h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: #1d1d1f;
        }
        
        .game-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .game-tag {
            background: #f0f0f5;
            color: #6e6e73;
            border-radius: 15px;
            padding: 3px 10px;
            font-size: 0.75rem;
            margin-right: 5px;
        }
        
        .game-rating {
            color: #f9a825;
            font-size: 0.9rem;
        }
        
        .game-desc {
            font-size: 0.9rem;
            color: #6e6e73;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.4;
        }
        
        /* 游戏播放器样式 */
        .game-player {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, rgba(255,184,202,0.95), rgba(107,213,255,0.95), rgba(255,222,125,0.95));
            background-size: 300% 300%;
            animation: gamePlayerGradient 20s ease infinite;
            z-index: 1000;
            display: none;
            flex-direction: column;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        
        @keyframes gamePlayerGradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        .player-header {
            /* 删除原来的标题栏样式 */
            /* background: linear-gradient(90deg, rgba(78,205,196,0.8), rgba(122,134,203,0.8));
            color: white;
            padding: 10px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(5px);
            .player-header h2 {
                color: white;
                font-size: 1.6rem;
                margin-right: auto;
            } */
        }
        
        .close-game-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b6b, #ff3366);
            color: white;
            font-size: 24px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            z-index: 1100; /* 确保按钮在最上层 */
        }
        
        .close-game-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(255, 51, 102, 0.4);
            background: linear-gradient(135deg, #ff3366, #ff0044);
        }
        
        .close-game-btn:active {
            transform: scale(0.95);
        }
        
        .game-container {
            padding-top: 20px; /* 添加顶部填充，避免与关闭按钮重叠 */
        }
        
        .clean-game-container {
            position: relative;
            width: 85%;
            height: 85%;
            max-width: 1280px;
            max-height: 720px;
        }
        
        .game-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: black;
        }
        
        .game-tip {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            opacity: 0.8;
            transition: opacity 0.5s;
        }
        
        /* 游戏详情 */
        .game-details {
            background: linear-gradient(135deg, rgba(240,248,255,0.7), rgba(255,255,255,0.8));
            max-width: 1000px;
            width: 90%;
            margin: 0 auto;
            border-radius: 0 0 15px 15px;
            overflow: hidden;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
            border-top: none;
        }
        
        .game-details.collapsed {
            max-height: 40px;
        }
        
        .game-details-toggle {
            background: linear-gradient(90deg, rgba(122,134,203,0.8), rgba(78,205,196,0.8));
            color: white;
            border: none;
            width: 100%;
            padding: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .game-details-toggle:hover {
            background: linear-gradient(90deg, rgba(122,134,203,1), rgba(78,205,196,1));
        }
        
        #game-details-content {
            padding: 0 20px 20px;
        }
        
        .game-section {
            margin-bottom: 20px;
        }
        
        .game-section h3 {
            margin-bottom: 10px;
            color: #ccc;
            font-size: 1rem;
        }
        
        .game-section p, .game-section ul {
            color: #999;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .game-section ul {
            margin-left: 20px;
        }
        
        .game-section li {
            margin-bottom: 5px;
        }
        
        /* 游戏返回信息 */
        .game-return-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            max-width: 400px;
            text-align: center;
            z-index: 1001;
        }
        
        .game-return-message p {
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .game-return-message button {
            background: #007aff;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.85rem;
            cursor: pointer;
        }
        
        /* 页脚样式 */
        footer {
            background: rgba(255, 255, 255, 0.7);
            margin-top: 30px;
            padding: 20px 0;
            text-align: center;
            color: #6e6e73;
            font-size: 0.9rem;
            backdrop-filter: blur(5px);
        }
        
        /* 移动设备响应式设计 */
        @media (max-width: 768px) {
            /* 主容器布局调整 */
            .main-container {
                flex-direction: column;
                width: 95%;
                margin: 10px auto;
            }
            
            /* 侧边栏调整为水平菜单 */
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid rgba(232, 232, 237, 0.5);
                padding: 10px 0;
                overflow-x: auto;
                white-space: nowrap;
            }
            
            /* 将类别列表改为水平滚动 */
            .side-nav ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-start;
                padding: 0 5px;
                margin-bottom: 5px;
            }
            
            .side-nav li {
                margin-right: 4px;
                margin-bottom: 4px;
            }
            
            .side-nav h3 {
                display: none; /* 在移动设备上隐藏分类标题 */
            }
            
            /* 调整内容区域 */
            .content {
                padding: 10px;
            }
            
            /* 头部布局调整 */
            header .container {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .logo {
                align-items: center;
                text-align: center;
            }
            
            .search-box {
                width: 100%;
            }
            
            .search-box input {
                width: 100%;
            }
            
            /* 游戏卡片调整 */
            .games-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            /* 游戏预览样式调整 */
            .game-preview {
                flex-direction: column;
                padding: 15px;
                gap: 15px;
                max-width: 100%;
            }
            
            .game-preview-image {
                width: 100%;
                max-height: 180px;
            }
            
            /* 调整关闭按钮位置和大小 */
            .close-game-btn {
                width: 35px;
                height: 35px;
                font-size: 20px;
                top: 10px;
                right: 10px;
            }
            
            /* 调整游戏网格在首页的显示 */
            .section-content {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 15px;
            }
            
            .section-content::-webkit-scrollbar {
                height: 4px;
            }
            
            .section-content::-webkit-scrollbar-thumb {
                background: rgba(0,0,0,0.1);
                border-radius: 4px;
            }
            
            /* 减小顶部标语尺寸 */
            .slogan {
                font-size: 0.9rem !important;
                padding: 3px 8px !important;
                margin: 2px 0 4px !important;
                line-height: 1.2 !important;
            }
            
            /* 调整logo尺寸 */
            .logo h1 {
                font-size: 1.2rem !important;
            }
            
            /* 优化header内边距 */
            header {
                padding: 8px 0 !important;
            }
            
            /* 确保导航分类在一屏内显示 */
            .side-nav ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: flex-start;
                padding: 0 5px !important;
                margin-bottom: 5px !important;
            }
            
            .side-nav li {
                margin-right: 4px !important;
                margin-bottom: 4px !important;
            }
            
            .category-link {
                padding: 4px 8px !important;
                font-size: 0.75rem !important;
                white-space: nowrap !important;
            }
            
            /* 减小类别之间的间距 */
            .sidebar {
                padding: 5px 0 !important;
            }
            
            /* 调整游戏网格在首页的显示 */
            .section-content {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                padding-bottom: 15px;
            }
            
            .section-content::-webkit-scrollbar {
                height: 4px;
            }
            
            .section-content::-webkit-scrollbar-thumb {
                background: rgba(0,0,0,0.1);
                border-radius: 4px;
            }
            
            /* 游戏详情调整 */
            .game-description {
                max-height: none;
            }
            
            .game-how-to-play, .game-features {
                padding: 8px 12px;
            }
            
            .game-container {
                width: 100%;
                padding: 5px;
            }
            
            /* 减小游戏预览图片尺寸 */
            .game-preview-image {
                max-height: 180px; /* 减小最大高度 */
            }
            
            /* 减小游戏卡片图片大小 */
            .game-card-img {
                height: 130px; /* 减小卡片图片高度 */
            }
            
            /* 减小字体大小 */
            .game-card-title {
                font-size: 0.95rem;
            }
            
            .game-description {
                font-size: 0.9rem;
                line-height: 1.3;
            }
            
            .game-preview-info h3 {
                font-size: 1.3rem;
                margin-bottom: 8px;
            }
            
            .game-how-to-play, .game-features {
                font-size: 0.9rem;
            }
            
            .game-how-to-play h4, .game-features h4 {
                font-size: 1rem;
            }
            
            .game-features li {
                font-size: 0.85rem;
                margin-bottom: 2px;
            }
            
            /* 减小评分星星大小 */
            .rating-stars {
                font-size: 0.9rem;
            }
            
            /* 减小整体间距 */
            .game-how-to-play, .game-features {
                padding: 8px 10px;
                margin-bottom: 8px;
            }
            
            /* 缩小按钮 */
            .play-external-btn {
                padding: 6px 15px;
                font-size: 0.9rem;
            }
        }
        
        /* 超小屏幕设备特殊优化 (小于 480px) */
        @media (max-width: 480px) {
            /* 进一步减小图片尺寸 */
            .game-preview-image {
                max-height: 150px;
            }
            
            .game-card-img {
                height: 110px;
            }
            
            /* 进一步减小字体大小 */
            .logo h1 {
                font-size: 1.3rem;
            }
            
            .slogan {
                font-size: 1rem;
                padding: 3px 8px;
            }
            
            .game-card-title {
                font-size: 0.85rem;
            }
            
            .game-description {
                font-size: 0.85rem;
                max-height: 70px;
            }
            
            .game-preview-info h3 {
                font-size: 1.2rem;
            }
            
            .game-how-to-play p, .game-features li {
                font-size: 0.8rem;
            }
            
            /* 减小搜索框大小 */
            .search-box input {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
            
            .search-box button {
                padding: 6px 12px;
                font-size: 0.85rem;
            }
            
            /* 减小分类导航按钮 */
            .category-link {
                padding: 5px 10px;
                font-size: 0.8rem;
            }
            
            /* 减小网格间距 */
            .games-grid {
                gap: 10px;
            }
            
            /* 调整卡片内边距 */
            .game-card {
                padding-bottom: 8px;
            }
            
            .game-info {
                padding: 8px 10px;
            }
        }
        
        /* 确保手机上的触摸体验良好 */
        @media (max-width: 768px) {
            /* 增加点击区域大小 */
            .play-btn, .close-game-btn, .category-link, .game-card {
                cursor: default; /* 移动设备不显示鼠标指针 */
            }
            
            /* 改进触摸反馈 */
            .play-btn:active, .category-link:active, .game-card:active {
                opacity: 0.7;
                transition: opacity 0.1s;
            }
            
            /* 改善滑动体验 */
            .content {
                -webkit-overflow-scrolling: touch;
            }
        }
        
        /* 改进手机横屏模式 */
        @media (max-width: 896px) and (orientation: landscape) {
            /* 在横屏模式下保持游戏预览的两列布局 */
            .game-preview {
                flex-direction: row;
            }
            
            .game-preview-image {
                width: 40%;
            }
            
            /* 调整游戏内容区域高度，避免横屏时内容过长需要滚动 */
            .game-container {
                max-height: 70vh;
                overflow-y: auto;
            }
        }
        
        /* 添加到现有样式表中 */
        .game-iframe {
            width: 100%;
            height: 657px;
            border-radius: 10px;
            background: rgba(5, 5, 15, 0.9);
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 0 15px rgba(0, 255, 255, 0.3);
            overflow: hidden;
            border: 1px solid rgba(0, 255, 255, 0.2);
            margin-bottom: 2rem;
        }
        
        .clean-game-container {
            width: 100%;
            position: relative;
        }
        
        .game-tip {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            opacity: 1;
            transition: opacity 0.5s ease;
        }
        
        /* 修改游戏预览样式、文字颜色和布局 */
        .game-preview {
            display: flex;
            flex-direction: row;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(240,248,255,0.95));
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
            overflow: hidden;
            max-width: 1000px;
            width: 90%;
            margin: 10px auto;
            padding: 20px;
            color: #333;
            gap: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.5);
        }
        
        /* 游戏预览图片区域样式优化 */
        .game-preview-image {
            width: 35%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        /* 游戏信息区域样式优化 */
        .game-preview-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            color: #333;
        }
        
        /* 游戏预览标题样式优化 */
        .game-preview-info h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #222;
            font-weight: 700;
        }
        
        /* 游戏描述文字样式优化 */
        .game-description {
            margin-bottom: 10px;
            font-size: 1rem;
            line-height: 1.4;
            color: #444;
            max-height: 80px;
            overflow-y: auto;
        }
        
        /* 游戏特点和玩法区域样式优化 */
        .game-how-to-play, .game-features {
            background: rgba(255,255,255,0.5);
            padding: 10px 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        /* 特性和玩法标题样式优化 */
        .game-how-to-play h4, .game-features h4 {
            color: #222;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        /* 游戏特性列表样式优化 */
        .game-features ul {
            padding-left: 20px;
            margin: 5px 0;
        }
        
        .game-features li {
            margin-bottom: 3px;
            font-size: 0.95rem;
        }
        
        /* 游戏评分样式优化 */
        .game-rating {
            margin-bottom: 10px;
        }
        
        /* 播放按钮样式优化 */
        .play-external-btn {
            background: linear-gradient(90deg, #ff6b6b, #ff8e53);
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(255,107,107,0.3);
            margin-top: 5px;
            align-self: flex-start;
        }
        
        /* 游戏预览页面头部优化 */
        .player-header {
            /* 删除原来的标题栏样式 */
            /* padding: 10px 20px; */
        }
        
        /* 如果游戏特性列表项较多，可滚动显示 */
        .game-features {
            max-height: 100px;
            overflow-y: auto;
        }
        
        /* 超小屏幕上进一步优化 */
        @media (max-width: 360px) {
            /* 进一步减小标语 */
            .slogan {
                font-size: 0.8rem !important;
                padding: 2px 6px !important;
            }
            
            /* 类别按钮进一步缩小 */
            .category-link {
                padding: 3px 6px !important;
                font-size: 0.7rem !important;
            }
            
            /* 确保导航能显示更多按钮 */
            .side-nav ul {
                padding: 0 2px !important;
            }
            
            .side-nav li {
                margin-right: 2px !important;
                margin-bottom: 2px !important;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <h1>Colorful Game World</h1>
                <p class="slogan">The Best Free Online Games - No Download Required</p>
            </div>
            <div class="search-box">
                <input type="text" placeholder="Search for games...">
                <button>Search</button>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- 左侧导航栏 -->
        <aside class="sidebar">
            <nav class="side-nav">
                <h3>Categories</h3>
                <ul>
                    <li><a href="#" class="category-link active" data-category="featured">Featured Games</a></li>
                    <li><a href="#" class="category-link" data-category="action">Action Games</a></li>
                    <li><a href="#" class="category-link" data-category="puzzle">Puzzle Games</a></li>
                    <li><a href="#" class="category-link" data-category="sports">Sports Games</a></li>
                    <li><a href="#" class="category-link" data-category="strategy">Strategy Games</a></li>
                </ul>
            </nav>
        </aside>

        <!-- 右侧内容区域 -->
        <main class="content">
            <!-- 精选游戏区域 -->
            <section id="featured" class="game-section active">
                <div class="section-header">
                    <h2>Featured Games</h2>
                </div>
                <div class="game-cards">
                    <!-- 游戏卡片通过JavaScript动态加载 -->
                </div>
            </section>

            <!-- 动作游戏区域 -->
            <section id="action" class="game-section">
                <div class="section-header">
                    <h2>Action Games</h2>
                </div>
                <div class="game-cards">
                    <!-- 动作游戏卡片通过JavaScript动态加载 -->
                </div>
            </section>

            <!-- 益智游戏区域 -->
            <section id="puzzle" class="game-section">
                <div class="section-header">
                    <h2>Puzzle Games</h2>
                </div>
                <div class="game-cards">
                    <!-- 益智游戏卡片通过JavaScript动态加载 -->
                </div>
            </section>

            <!-- 体育游戏区域 -->
            <section id="sports" class="game-section">
                <div class="section-header">
                    <h2>Sports Games</h2>
                </div>
                <div class="game-cards">
                    <!-- 体育游戏卡片通过JavaScript动态加载 -->
                </div>
            </section>

            <!-- 策略游戏区域 -->
            <section id="strategy" class="game-section">
                <div class="section-header">
                    <h2>Strategy Games</h2>
                </div>
                <div class="game-cards">
                    <!-- 策略游戏卡片通过JavaScript动态加载 -->
                </div>
            </section>

            <!-- 游戏播放区域 -->
            <section id="game-player" class="game-player" style="display: none;">
                <button class="close-game-btn" onclick="closeGame()">&times;</button>
                <div class="game-container">
                    <!-- 游戏将在这里加载 -->
                </div>
            </section>

            <!-- 返回消息 -->
            <div id="return-message" style="display:none" class="game-return-message">
                <p>Game has opened in a new window. You can close the game window at any time to return to this site and continue browsing.</p>
                <button onclick="document.getElementById('return-message').style.display='none'">I understand</button>
            </div>
        </main>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>About Colorful Game World</h3>
                    <p>We offer the best free online games that you can play instantly in your browser. No downloads, no installations - just click and play!</p>
                </div>
                <div class="footer-links">
                    <h3>Game Categories</h3>
                    <ul>
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Puzzle</a></li>
                        <li><a href="#">Sports</a></li>
                        <li><a href="#">Strategy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Colorful Game World. All games are free to play online.</p>
            </div>
        </div>
    </footer>

    <script>
        // 游戏数据结构
        const games = {
            featured: [],
            action: [],
            puzzle: [],
            sports: [],
            strategy: []
        };

        // 精选游戏数组
        const featuredGames = [];

        // Famobi游戏链接映射 - 所有游戏数据
        const famobiGameLinks = {
            "slope": {
                id: "slope",
                title: "Slope",
                url: "https://play.famobi.com/slope",
                category: "action",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/SlopeTeaser.jpg",
                description: "A high-speed 3D ball rolling game that tests your reaction skills. Free online game with no download required.",
                features: ["Endless Mode", "High Speed Challenge", "Simple Controls", "Increasing Difficulty"],
                howToPlay: "Use arrow keys or AD to control the ball left and right. Avoid obstacles and go as far as you can.",
                tags: ["3D", "Skill", "Speed"],
                rating: 4.5
            },
            "rise-up": {
                id: "rise-up",
                title: "Rise Up",
                url: "https://play.famobi.com/rise-up",
                category: "action",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/RiseUpTeaser.jpg",
                description: "Protect your balloon as it rises by using a shield to block all obstacles. Play this free online game instantly without downloading.",
                features: ["Simple Controls", "Challenging Levels", "Unique Gameplay Mechanics"],
                howToPlay: "Use mouse or touch to control the shield and protect the balloon from sharp objects.",
                tags: ["Skill", "Casual", "Reaction"],
                rating: 4.6
            },
            "2048": {
                id: "2048",
                title: "2048",
                url: "https://play.famobi.com/2048",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/2048Teaser.jpg",
                description: "Classic number merging game where you combine matching numbers to create larger ones. Free online puzzle game that you can play instantly.",
                features: ["Simple Rules", "Strategic Thinking", "Endless Challenge"],
                howToPlay: "Use arrow keys to move all tiles. When two tiles with the same number touch, they merge into their sum.",
                tags: ["Numbers", "Strategy", "Brain"],
                rating: 4.8
            },
            "pipe-puzzle": {
                id: "pipe-puzzle",
                title: "Pipe Puzzle",
                url: "https://play.famobi.com/pipe-puzzle",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/PipePuzzleTeaser.jpg",
                description: "Rotate and connect pipes to create a complete path for water to flow through. A free online puzzle game with no download needed.",
                features: ["Multiple Difficulty Levels", "Brain Challenge", "Time Limits"],
                howToPlay: "Click on pipes to rotate them and create a connecting path from start to finish.",
                tags: ["Puzzle", "Logic", "Pipes"],
                rating: 4.2
            },
            "words-of-wonders": {
                id: "words-of-wonders",
                title: "Words of Wonders",
                url: "https://play.famobi.com/words-of-wonders",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/WordsOfWondersTeaser.jpg",
                description: "Find letter combinations to form words and unlock world wonders. Free online word game with no registration required.",
                features: ["Numerous Levels", "Vocabulary Challenge", "World Wonders Introduction"],
                howToPlay: "Rotate the letter wheel to create words and fill in the blanks to complete each stage.",
                tags: ["Words", "Educational", "Puzzle"],
                rating: 4.3
            },
            "8ball-online": {
                id: "8ball-online",
                title: "8 Ball Online",
                url: "https://play.famobi.com/8ball-online",
                category: "sports",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/8BallOnlineTeaser.jpg",
                description: "Online pool game where you can challenge the computer or play with friends. Free online sports game accessible on any device.",
                features: ["Realistic physics engine", "Multiplayer mode", "Simple controls"],
                howToPlay: "Aim and drag the mouse or touch screen to set the power and direction, then release the cue ball.",
                tags: ["Pool", "Sports", "Skill"],
                rating: 4.4
            },
            "tap-tap-dunk": {
                id: "tap-tap-dunk",
                title: "Tap Tap Dunk",
                url: "https://play.famobi.com/tap-tap-dunk",
                category: "sports",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/TapTapDunkTeaser.jpg",
                description: "Quickly tap the screen to get the ball into the hoop. Experience this exciting free online basketball game.",
                features: ["Simple controls", "Various challenges", "Different courts"],
                howToPlay: "Tap the screen on the left or right side to control the ball direction and aim for a precise shot.",
                tags: ["Basketball", "Skill", "Reaction"],
                rating: 4.3
            },
            "candy-bubble": {
                id: "candy-bubble",
                title: "Candy Bubble",
                url: "https://play.famobi.com/candy-bubble",
                category: "strategy",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/CandyBubbleTeaser.jpg",
                description: "Match and pop colorful candy bubbles in this addictive free online puzzle game. No download or installation needed.",
                features: ["Numerous levels", "Various special candies", "Time challenge"],
                howToPlay: "Aim and shoot bubbles to connect three or more candies of the same color to make them disappear.",
                tags: ["Matching", "Bubbles", "Candies"],
                rating: 4.1
            },
            "tower-smash": {
                id: "tower-smash",
                title: "Tower Smash",
                url: "https://play.famobi.com/tower-smash",
                category: "strategy",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/TowerSmashTeaser.jpg",
                description: "Accurately control the destruction of each floor of the tower to get high scores. Free to play online with no download required.",
                features: ["Physics engine", "Strategic thinking", "Upgrade system"],
                howToPlay: "Click the screen to launch the ball and aim at the tower's weak point to destroy it most effectively.",
                tags: ["Physics", "Destruction", "Accurate"],
                rating: 4.0
            },
            "tower-crash-3d": {
                id: "tower-crash-3d",
                title: "Tower Crash 3D",
                url: "https://play.famobi.com/tower-crash-3d",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/TowerCrash3dTeaser.jpg",
                description: "Knock down towers by launching balls in this physics-based free online game. Challenge yourself with different levels.",
                features: ["3D physics effect", "Various levels", "Strategic gameplay"]
            },
            "gold-mine": {
                id: "gold-mine",
                title: "Gold Mine",
                url: "https://play.famobi.com/gold-mine",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/GoldMineTeaser.jpg",
                description: "Dig for gold and collect precious minerals in this exciting free online adventure game. Play instantly in your browser.",
                features: ["Strategic gameplay", "Various items", "Increasing difficulty"],
                howToPlay: "Collect gold and gems in this classic mining game. Free to play online with no download required.",
                tags: ["Strategic gameplay", "Various items", "Increasing difficulty"],
                rating: 4.0
            },
            "bubble-woods": {
                id: "bubble-woods",
                title: "Bubble Woods",
                url: "https://play.famobi.com/bubble-woods",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/BubbleWoodsTeaser.jpg",
                description: "Help the little fox save his forest friends in this bubble shooter free online game. Perfect for quick gaming sessions.",
                features: ["Cute characters", "Various levels", "Fun bubble shooting gameplay"],
                howToPlay: "In this bubble shooting game, help the fox rescue his forest friends. Free to play online with no download required.",
                tags: ["Cute characters", "Various levels", "Fun bubble shooting gameplay"],
                rating: 3.8
            },
            "save-the-princess": {
                id: "save-the-princess",
                title: "Save the Princess",
                url: "https://play.famobi.com/save-the-princess",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/SaveThePrincessTeaser.jpg",
                description: "Solve various puzzles to save the trapped princess in this free online game. Play instantly without downloading.",
                features: ["Various levels", "Puzzle solving", "Beautiful graphics"],
                howToPlay: "In this puzzle game, you need to solve various puzzles to rescue the trapped princess. Free to play online with no download required.",
                tags: ["Various levels", "Puzzle solving", "Beautiful graphics"],
                rating: 4.3
            },
            "peet-a-lock": {
                id: "peet-a-lock",
                title: "Peet a Lock",
                url: "https://play.famobi.com/peet-a-lock",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/PeetALockTeaser.jpg",
                description: "Unlock various locks and test your puzzle-solving skills in this free online game. No registration required.",
                features: ["Numerous levels", "Increasing difficulty", "Puzzle solving challenge"],
                howToPlay: "Unlock various locks and test your puzzle solving skills! Free to play online with no download required.",
                tags: ["Numerous levels", "Increasing difficulty", "Puzzle solving challenge"],
                rating: 4.1
            },
            "pengu-slide": {
                id: "pengu-slide",
                title: "Pengu Slide",
                url: "https://play.famobi.com/pengu-slide",
                category: "arcade",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/PenguSlideTeaser.jpg",
                description: "Control the cute penguin as it slides on ice to collect fish and avoid obstacles. Free online arcade game for all ages.",
                features: ["Cute character", "Simple controls", "Rich content"],
                howToPlay: "Control the cute penguin sliding on the ice to collect fish and avoid obstacles. Free to play online with no download required.",
                tags: ["Cute character", "Simple controls", "Rich content"],
                rating: 4.5
            },
            "peet-around": {
                id: "peet-around",
                title: "Peet Around",
                url: "https://play.famobi.com/peet-around",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/PeetAroundTeaser.jpg",
                description: "Find your way through mazes, collect more items, and unlock more levels in this free online puzzle game.",
                features: ["Maze exploration", "Rich levels", "Fun game"],
                howToPlay: "Find your way out in the maze, collect more items, and unlock more levels. Free to play online with no download required.",
                tags: ["Maze exploration", "Rich levels", "Fun game"],
                rating: 3.9
            },
            "emoji-flow": {
                id: "emoji-flow",
                title: "Emoji Flow",
                url: "https://play.famobi.com/emoji-flow",
                category: "puzzle",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/EmojiFlowTeaser.jpg",
                description: "Connect matching emojis to create flows and complete various challenges. Free online puzzle game with no download needed.",
                features: ["Matching game", "Emojis", "Rich levels"],
                howToPlay: "Connect the same emoji to create a flow and complete various challenges. Free to play online with no download required.",
                tags: ["Matching game", "Emojis", "Rich levels"],
                rating: 4.4
            },
            "neon-swing": {
                id: "neon-swing",
                title: "Neon Swing",
                url: "https://play.famobi.com/neon-swing",
                category: "arcade",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/NeonSwingTeaser.jpg",
                description: "Swing in the neon environment, collect gems and avoid obstacles. Free online arcade game with simple controls.",
                features: ["Reaction test", "Neon style", "Simple controls"],
                howToPlay: "Swing in the neon environment and collect gems while avoiding obstacles. Free to play online with no download required.",
                tags: ["Reaction test", "Neon style", "Simple controls"],
                rating: 4.6
            },
            "neon-tower": {
                id: "neon-tower",
                title: "Neon Tower",
                url: "https://play.famobi.com/neon-tower",
                category: "arcade",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/NeonTowerTeaser.jpg",
                description: "Climb the rising neon tower, avoid obstacles and reach the highest point. Free online arcade game with beautiful neon graphics.",
                features: ["Neon art", "Reaction challenge", "High score competition"],
                howToPlay: "Climb the neon tower while avoiding obstacles and reach the highest point. Free to play online with no download required.",
                tags: ["Neon art", "Reaction challenge", "High score competition"],
                rating: 4.7
            },
            "drift-dudes": {
                id: "drift-dudes",
                title: "Drift Dudes",
                url: "https://play.famobi.com/drift-dudes",
                category: "racing",
                thumbnail: "https://img.cdn.famobi.com/portal/html5games/images/tmp/DriftDudesTeaser.jpg",
                description: "Experience exciting car drifting, unlock different vehicles and tracks in this free online racing game.",
                features: ["Drifting skill", "Various vehicles", "Racing challenge"],
                howToPlay: "Experience an exciting car drifting game and unlock different vehicles and tracks. Free to play online with no download required.",
                tags: ["Drifting skill", "Various vehicles", "Racing challenge"],
                rating: 4.8
            }
        };

        // 在famobiGameLinks对象中为没有评分的游戏添加评分
        // 找到以下游戏对象，在每个对象中添加rating属性

        // 找到 "tower-crash-3d" 游戏对象，添加评分
        famobiGameLinks["tower-crash-3d"].rating = 4.2;

        // 找到 "gold-mine" 游戏对象，添加评分
        famobiGameLinks["gold-mine"].rating = 4.0;

        // 找到 "bubble-woods" 游戏对象，添加评分
        famobiGameLinks["bubble-woods"].rating = 3.8;

        // 找到 "save-the-princess" 游戏对象，添加评分
        famobiGameLinks["save-the-princess"].rating = 4.3;

        // 找到 "peet-a-lock" 游戏对象，添加评分
        famobiGameLinks["peet-a-lock"].rating = 4.1;

        // 找到 "pengu-slide" 游戏对象，添加评分
        famobiGameLinks["pengu-slide"].rating = 4.5;

        // 找到 "peet-around" 游戏对象，添加评分
        famobiGameLinks["peet-around"].rating = 3.9;

        // 找到 "emoji-flow" 游戏对象，添加评分
        famobiGameLinks["emoji-flow"].rating = 4.4;

        // 找到 "neon-swing" 游戏对象，添加评分
        famobiGameLinks["neon-swing"].rating = 4.6;

        // 找到 "neon-tower" 游戏对象，添加评分
        famobiGameLinks["neon-tower"].rating = 4.7;

        // 找到 "drift-dudes" 游戏对象，添加评分
        famobiGameLinks["drift-dudes"].rating = 4.8;

        // 初始化游戏数据
        function initializeGames() {
            // 为没有评分的游戏添加评分
            if (famobiGameLinks["tower-crash-3d"] && !famobiGameLinks["tower-crash-3d"].rating) 
                famobiGameLinks["tower-crash-3d"].rating = 4.2;
            
            if (famobiGameLinks["gold-mine"] && !famobiGameLinks["gold-mine"].rating) 
                famobiGameLinks["gold-mine"].rating = 4.0;
            
            if (famobiGameLinks["bubble-woods"] && !famobiGameLinks["bubble-woods"].rating) 
                famobiGameLinks["bubble-woods"].rating = 3.8;
            
            if (famobiGameLinks["save-the-princess"] && !famobiGameLinks["save-the-princess"].rating) 
                famobiGameLinks["save-the-princess"].rating = 4.3;
            
            if (famobiGameLinks["peet-a-lock"] && !famobiGameLinks["peet-a-lock"].rating) 
                famobiGameLinks["peet-a-lock"].rating = 4.1;
            
            if (famobiGameLinks["pengu-slide"] && !famobiGameLinks["pengu-slide"].rating) 
                famobiGameLinks["pengu-slide"].rating = 4.5;
            
            if (famobiGameLinks["peet-around"] && !famobiGameLinks["peet-around"].rating) 
                famobiGameLinks["peet-around"].rating = 3.9;
            
            if (famobiGameLinks["emoji-flow"] && !famobiGameLinks["emoji-flow"].rating) 
                famobiGameLinks["emoji-flow"].rating = 4.4;
            
            if (famobiGameLinks["neon-swing"] && !famobiGameLinks["neon-swing"].rating) 
                famobiGameLinks["neon-swing"].rating = 4.6;
            
            if (famobiGameLinks["neon-tower"] && !famobiGameLinks["neon-tower"].rating) 
                famobiGameLinks["neon-tower"].rating = 4.7;
            
            if (famobiGameLinks["drift-dudes"] && !famobiGameLinks["drift-dudes"].rating) 
                famobiGameLinks["drift-dudes"].rating = 4.8;

            // 清空分类
            games.featured = [];
            games.action = [];
            games.puzzle = [];
            games.sports = [];
            games.strategy = [];
            featuredGames.length = 0;
            
            // 分类游戏
            for (const gameId in famobiGameLinks) {
                const game = famobiGameLinks[gameId];
                
                // 根据游戏类别添加到相应分类
                if (game.category === 'action') {
                    games.action.push(game);
                } else if (game.category === 'puzzle') {
                    games.puzzle.push(game);
                } else if (game.category === 'sports') {
                    games.sports.push(game);
                } else if (game.category === 'strategy') {
                    games.strategy.push(game);
                } else if (game.category === 'arcade') {
                    // 将arcade类型的游戏添加到action分类
                    games.action.push(game);
                } else if (game.category === 'racing') {
                    // 将racing类型的游戏添加到sports分类
                    games.sports.push(game);
                }
                
                // 添加一些游戏到精选区
                if (game.rating && game.rating >= 4.3 || Math.random() > 0.7) {
                    featuredGames.push(game);
                }
            }
            
            // 确保精选游戏不为空
            if (featuredGames.length < 6) {
                // 从各分类中添加游戏
                const allCategories = ['action', 'puzzle', 'sports', 'strategy'];
                for (const category of allCategories) {
                    for (const game of games[category]) {
                        if (!featuredGames.includes(game)) {
                            featuredGames.push(game);
                        }
                        if (featuredGames.length >= 6) break;
                    }
                    if (featuredGames.length >= 6) break;
                }
            }
            
            console.log("游戏分类初始化完成");
            console.log("精选游戏:", featuredGames.length);
            console.log("动作游戏:", games.action.length);
            console.log("益智游戏:", games.puzzle.length);
            console.log("体育游戏:", games.sports.length);
            console.log("策略游戏:", games.strategy.length);
        }

        // 加载分类的游戏
        function loadCategoryGames(categoryId, games) {
            const gamesList = document.querySelector(`#${categoryId} .game-cards`);
            if (!gamesList) return;
            
            // 清空现有内容
            gamesList.innerHTML = '';
            
            // 如果没有传入游戏列表，使用该分类的所有游戏
            if (!games) {
                games = Object.values(famobiGameLinks).filter(game => 
                    game.categories && game.categories.includes(categoryId));
            }
            
            // 创建游戏卡片
            games.forEach(game => {
                // 构建预览图URL
                let thumbnailUrl = '';
                
                // 如果游戏对象中已有缩略图URL，则直接使用它
                if (game.thumbnail) {
                    thumbnailUrl = game.thumbnail;
                } else {
                    // 从URL中提取游戏ID
                    const gameId = game.url.split('/').pop();
                    
                    // 转换为CamelCase格式
                    const formattedGameId = gameId.split('-')
                        .map(part => part.charAt(0).toUpperCase() + part.slice(1))
                        .join('');
                        
                    // 使用带Teaser后缀的URL，因为这似乎是最常见的格式
                    thumbnailUrl = `https://img.cdn.famobi.com/portal/html5games/images/tmp/${formattedGameId}Teaser.jpg`;
                }
                
                // 创建评分星星HTML
                let ratingHtml = '';
                if (game.rating) {
                    const rating = game.rating;
                    const fullStars = Math.floor(rating);
                    const halfStar = rating % 1 >= 0.5 ? 1 : 0;
                    const emptyStars = 5 - fullStars - halfStar;
                    
                    ratingHtml = `
                        <div class="card-rating">
                            <span class="card-stars">
                                ${'★'.repeat(fullStars)}${halfStar ? '⭐' : ''}${'☆'.repeat(emptyStars)}
                            </span>
                            <span class="card-score">${rating.toFixed(1)}</span>
                        </div>
                    `;
                }
                
                // 创建游戏卡片HTML，使用智能图片加载
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                gameCard.innerHTML = `
                    <div class="game-thumbnail">
                        <img 
                            src="${thumbnailUrl}" 
                            alt="${game.title}" 
                            onerror="this.handleImageError(this, '${game.id}')"
                        >
                        <div class="game-overlay">
                            <button class="play-btn">Start Game</button>
                        </div>
                    </div>
                    <div class="game-info">
                        <h3 class="game-title">${game.title}</h3>
                        ${ratingHtml}
                        <p class="game-desc">${game.shortDescription || (game.description && game.description.length > 60 ? game.description.substring(0, 60) + '...' : game.description || '')}</p>
                    </div>
                `;
                
                // 添加点击事件
                gameCard.addEventListener('click', (e) => {
                    if (!e.target.closest('.play-btn')) {
                        launchGame(game.id);
                    } else {
                        launchGame(game.id);
                    }
                });
                
                // 添加到游戏列表
                gamesList.appendChild(gameCard);
            });
            
            // 添加图片加载错误处理函数
            HTMLImageElement.prototype.handleImageError = function(imgElement, gameId) {
                // ... 现有代码保持不变 ...
            };
        }

        // 加载所有分类的游戏
        function loadAllCategories() {
            // 重新初始化游戏数据
            initializeGames();
            
            // 加载各个分类的游戏
            loadCategoryGames('featured', featuredGames);
            loadCategoryGames('action', games.action);
            loadCategoryGames('puzzle', games.puzzle);
            loadCategoryGames('sports', games.sports);
            loadCategoryGames('strategy', games.strategy);
            
            console.log("所有游戏分类已加载完成");
        }

        // 设置分类导航
        function setupCategoryNavigation() {
            const categoryLinks = document.querySelectorAll('.category-link');
            
            categoryLinks.forEach(link => {
                link.addEventListener('click', function(event) {
                    event.preventDefault();
                    
                    // 移除所有active类
                    categoryLinks.forEach(el => el.classList.remove('active'));
                    document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
                    
                    // 添加active类到当前元素
                    this.classList.add('active');
                    
                    // 显示对应的游戏区域
                    const category = this.getAttribute('data-category');
                    document.getElementById(category).classList.add('active');
                });
            });
        }

        // 启动游戏预览
        function launchGame(gameId) {
            const game = famobiGameLinks[gameId];
            if (!game) {
                console.error('未找到游戏:', gameId);
                return;
            }
            
            console.log('查看游戏:', game.title);
            
            // 获取游戏预览区域
            const gamePlayer = document.getElementById('game-player');
            gamePlayer.style.display = 'flex';
            
            // 获取游戏容器
            const gameContainer = document.querySelector('.game-container');
            
            // 创建游戏特点HTML
            const featuresHtml = game.features ? 
                `<div class="game-features">
                    <h4>Game Features</h4>
                    <ul>${game.features.map(feature => `<li>${feature}</li>`).join('')}</ul>
                </div>` : '';
            
            // 创建游戏玩法HTML
            const howToPlayHtml = game.howToPlay ? 
                `<div class="game-how-to-play">
                    <h4>How To Play</h4>
                    <p>${game.howToPlay}</p>
                </div>` : '';
            
            // 创建评分星星HTML
            const rating = game.rating || 0; // 如果没有评分，默认为0
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5 ? 1 : 0;
            const emptyStars = 5 - fullStars - halfStar;
            
            const starsHtml = `
                <div class="game-rating">
                    <div class="rating-stars">
                        ${'★'.repeat(fullStars)}${halfStar ? '⭐' : ''}${'☆'.repeat(emptyStars)}
                    </div>
                    <span class="rating-score">${rating.toFixed(1)}</span>
                </div>
            `;
            
            // 创建游戏预览内容
            gameContainer.innerHTML = `
                <div class="game-preview">
                    <img src="${game.thumbnail}" alt="${game.title}" class="game-preview-image">
                    <div class="game-preview-info">
                        <h3>${game.title}</h3>
                        ${rating ? starsHtml : '<div class="game-rating">No rating yet</div>'}
                        <div class="game-description">
                            <p>${game.description}</p>
                        </div>
                        ${howToPlayHtml}
                        ${featuresHtml}
                        <button class="play-external-btn" onclick="openGameExternal('${game.id}')">
                            Play Game
                        </button>
                    </div>
                </div>
            `;
            
            // 隐藏游戏详情区域
            const gameDetails = document.getElementById('game-details');
            if (gameDetails) {
                gameDetails.style.display = 'none';
            }
        }

        // 在新窗口中打开游戏
        function openGameExternal(gameId) {
            const game = famobiGameLinks[gameId];
            if (!game) return;
            
            window.open(game.url, '_blank');
        }

        // 关闭游戏预览
        function closeGame() {
            const gamePlayer = document.getElementById('game-player');
            gamePlayer.style.display = 'none';
            
            // 清空游戏容器
            document.querySelector('.game-container').innerHTML = '';
        }

        // 切换游戏详情显示
        function toggleGameDetails() {
            const gameDetails = document.getElementById('game-details');
            const toggleBtn = document.querySelector('.game-details-toggle');
            
            if (gameDetails.classList.contains('collapsed')) {
                gameDetails.classList.remove('collapsed');
                toggleBtn.textContent = 'Hide Details ▼';
            } else {
                gameDetails.classList.add('collapsed');
                toggleBtn.textContent = 'Show Details ▲';
            }
        }

        // 搜索游戏
        function searchGames() {
            const searchInput = document.querySelector('.search-box input');
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (!searchTerm) {
                alert('Please enter a search term');
                return;
            }
            
            // 切换到精选游戏区域
            document.querySelectorAll('.category-link').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.game-section').forEach(el => el.classList.remove('active'));
            
            document.querySelector('.category-link[data-category="featured"]').classList.add('active');
            document.getElementById('featured').classList.add('active');
            
            // 获取搜索结果 - 删除标签相关的搜索条件
            const searchResults = [];
            for (const gameId in famobiGameLinks) {
                const game = famobiGameLinks[gameId];
                if (game.title.toLowerCase().includes(searchTerm) || 
                    game.description.toLowerCase().includes(searchTerm)) {
                    searchResults.push(game);
                }
            }
            
            // 更新标题
            document.querySelector('#featured .section-header h2').textContent = 
                `Search Results: ${searchTerm} (${searchResults.length} games)`;
            
            // 加载搜索结果
            loadCategoryGames('featured', searchResults);
        }

        // 删除指定游戏
        function removeGamesFromList() {
            // 删除点球大战，1v1-lol，塔防这三个游戏
            delete famobiGameLinks["penalty-kicks"];
            delete famobiGameLinks["1v1-lol"];
            delete famobiGameLinks["tower-defense"];
            
            console.log("已删除指定的三个游戏");
        }

        // 调整游戏框架大小
        function resizeGameFrame() {
            const gameFrame = document.getElementById('game-iframe');
            if (gameFrame) {
                // 设置高度为宽度的1/1.75的比例
                const width = gameFrame.offsetWidth;
                const height = width / 1.75;
                gameFrame.style.height = height + 'px';
            }
        }

        // 添加搜索按钮事件
        document.querySelector('.search-box button').addEventListener('click', searchGames);

        // 添加搜索框回车事件
        document.querySelector('.search-box input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchGames();
            }
        });

        // 窗口大小变化时调整iframe大小
        window.addEventListener('resize', resizeGameFrame);

        // 页面加载完成后执行初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log("页面加载完成，开始初始化...");
            
            // 初始化游戏数据
            initializeGames();
            
            // 加载所有分类的游戏
            loadCategoryGames('featured', featuredGames);
            loadCategoryGames('action', games.action);
            loadCategoryGames('puzzle', games.puzzle);
            loadCategoryGames('sports', games.sports);
            loadCategoryGames('strategy', games.strategy);
            
            // 设置分类导航
            setupCategoryNavigation();
            
            // 为关闭按钮绑定点击事件
            const closeButton = document.querySelector('.close-game-btn');
            if (closeButton) {
                closeButton.addEventListener('click', closeGame);
            }
            
            // 移除指定游戏
            removeGamesFromList();
            
            console.log("初始化完成！");
        });
    </script>
</body>
</html> 